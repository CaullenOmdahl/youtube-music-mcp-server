runtime: "container"
build:
  dockerfile: "Dockerfile"
  dockerBuildPath: "."
startCommand:
  type: "http"
  oauth:
    enabled: true
    metadata:
      resource_metadata: "/.well-known/oauth-protected-resource"
      authorization_server: "/.well-known/oauth-authorization-server"
    endpoints:
      authorize: "/oauth/authorize"
      token: "/oauth/token"
      register: "/oauth/register"
    scopes:
      - "mcp:tools"
      - "youtube:readonly"
      - "youtube:manage_playlists"
    features:
      - "dynamic_client_registration"
      - "pkce_required"
      - "refresh_tokens"
  configSchema:
    type: "object"
    properties:
      oauth_client_id:
        type: "string"
        title: "Google OAuth Client ID"
        description: "OAuth 2.1 client ID from Google Cloud Console with YouTube Data API v3 enabled"
      oauth_client_secret:
        type: "string"
        title: "Google OAuth Client Secret"
        description: "OAuth 2.1 client secret from Google Cloud Console"
        format: "password"
      server_url:
        type: "string"
        title: "Server URL"
        description: "Public URL of the MCP server (auto-detected if not provided)"
        default: ""
      redis_url:
        type: "string"
        title: "Redis Connection URL"
        description: "Redis URL for session and token storage (optional, defaults to in-memory)"
        default: ""
      encryption_key:
        type: "string"
        title: "Encryption Key"
        description: "32-byte base64 encryption key for token storage"
        format: "password"
      rate_limit_per_minute:
        type: "integer"
        title: "Rate Limit Per Minute"
        description: "Maximum API requests per minute per user"
        default: 60
        minimum: 1
        maximum: 300
    required: ["oauth_client_id", "oauth_client_secret", "encryption_key"]
  exampleConfig:
    oauth_client_id: "your-client-id.googleusercontent.com"
    oauth_client_secret: "GOCSPX-your-client-secret"
    server_url: "https://your-server.smithery.ai"
    encryption_key: "base64-encoded-32-byte-key"
    redis_url: "redis://localhost:6379"
    rate_limit_per_minute: 60